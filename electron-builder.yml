# =============================================
# electron-builder.yml
# 역할: Electron 앱 인스톨러(.exe) 빌드 설정
# 실행: npx electron-builder (또는 npm run build:electron)
# =============================================

appId: com.notionclone.app
productName: Notion Clone
copyright: Copyright © 2026

# ── 빌드 입출력 디렉토리 ────────────────────────────
directories:
  output: dist-electron        # 생성된 인스톨러 출력 위치
  buildResources: electron/assets  # 아이콘 등 빌드 리소스

# ── Electron 메인 파일 및 앱 포함 파일 ────────────────
# 'files' = 앱 asar 번들에 포함할 파일 (전체 node_modules 제외)
files:
  - electron/main.js
  - electron/preload.js
  - package.json

# ── extraResources: asar 밖에 두어 런타임에 접근 가능 ─────
# process.resourcesPath 로 접근
extraResources:
  # Next.js standalone 서버 전체
  - from: .next/standalone/
    to: next/
    filter:
      - "**/*"

  # Next.js 정적 파일 (CSS, JS 번들)
  # copy-next-static.js 가 standalone/.next/static 에 이미 복사함
  # 여기서는 별도 복사 불필요 — standalone/ 안에 포함됨

  # PyInstaller 번들 백엔드 전체 폴더
  - from: dist-backend/backend/
    to: backend/
    filter:
      - "**/*"

  # Electron 보조 파일
  - from: electron/loading.html
    to: electron/loading.html
  - from: electron/preload.js
    to: electron/preload.js

# ── Windows 설정 ─────────────────────────────────────
win:
  target:
    - target: nsis
      arch:
        - x64
  # 아이콘 파일 (없으면 Electron 기본 아이콘 사용)
  # icon: electron/assets/icon.ico

# ── NSIS 인스톨러 설정 ────────────────────────────────
nsis:
  oneClick: true               # 클릭 한 번으로 설치 (관리자 권한 불필요)
  perMachine: false            # 현재 사용자에게만 설치 (AppData\Local)
  createDesktopShortcut: true  # 바탕화면 바로가기 생성
  createStartMenuShortcut: true
  shortcutName: Notion Clone

# ── 퍼블리시 설정 (자동 업데이트 미사용) ──────────────
publish: null
